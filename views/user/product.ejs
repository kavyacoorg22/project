<div class="hero-wrap hero-bread" style="background-image: url('/images/bg_1.jpg');">
  <div class="container">
    <div class="row no-gutters slider-text align-items-center justify-content-center">
      <div class="col-md-9 ftco-animate text-center">
        <p class="breadcrumbs"><span class="mr-2"><a href="index.html">Home</a></span> <span class="mr-2"><a href="index.html">Product</a></span> <span>Product Single</span></p>
        <h1 class="mb-0 bread">Product Single</h1>
      </div>
    </div>
  </div>
</div>

<!-- <section class="ftco-section">
  
  <div class="container">
    <div class="row">
      <div class="col-lg-6 mb-5 ftco-animate">
        <a href="images/product-1.jpg" class="image-popup"><img src="/images/product-1.jpg" class="img-fluid" alt="Colorlib Template"></a>
      </div>
      <div class="col-lg-6 product-details pl-md-5 ftco-animate">
        <h3><%=product.name%></h3>
        <div class="rating d-flex">
          <p class="text-left mr-4">
            <a href="#" class="mr-2">5.0</a>
            <a href="#"><span class="ion-ios-star-outline"></span></a>
            <a href="#"><span class="ion-ios-star-outline"></span></a>
            <a href="#"><span class="ion-ios-star-outline"></span></a>
            <a href="#"><span class="ion-ios-star-outline"></span></a>
            <a href="#"><span class="ion-ios-star-outline"></span></a>
          </p>
          <p class="text-left mr-4">
            <a href="#" class="mr-2" style="color: #000;">100 <span style="color: #bbb;">Rating</span></a>
          </p>
         
        </div>
        <p class="price"><span><%product.price%></span></p>
        <p>A small river named Duden flows by their place and supplies it with the necessary regelialia. It is a paradisematic country, in which roasted parts of sentences fly into your mouth. Text should turn around and return to its own, safe country. But nothing the copy said could convince her and so it didn’t take long until.
        </p>
        <div class="row mt-4">
         
          <div class="w-100"></div>
          <div class="input-group col-md-6 d-flex mb-3">
             <span class="input-group-btn mr-2">
                <button type="button" class="quantity-left-minus btn"  data-type="minus" data-field="">
                 <i class="ion-ios-remove"></i>
                </button>
              </span>
             <input type="text" id="quantity" name="quantity" class="form-control input-number" value="1" min="1" max="100">
             <span class="input-group-btn ml-2">
                <button type="button" class="quantity-right-plus btn" data-type="plus" data-field="">
                   <i class="ion-ios-add"></i>
               </button>
             </span>
          </div>
          <div class="w-100"></div>
          <div class="col-md-12">
            <p style="color: #000;"><%=product.quantity%> kg available</p>
          </div>
        </div>
        <p><a href="cart.html" class="btn btn-black py-3 px-5">Add to Cart</a></p>
      </div>
    </div>
  </div>
</section> -->


<section class="ftco-section">
  <div class="container">
    <div class="row">
      <div class="col-lg-6 mb-5 ftco-animate">
        <!-- Product Image Slider -->
        <div id="product-slider" class="carousel slide" data-ride="carousel">
          <ol class="carousel-indicators">
            <% product.images.forEach((image, index) => { %>
              <li data-target="#product-slider" data-slide-to="<%= index %>" class="<%= index === 0 ? 'active' : '' %>"></li>
            <% }) %>
          </ol>

          <div class="carousel-inner">
            <% product.images.forEach((image, index) => { %>
              <div class="carousel-item <%= index === 0 ? 'active' : '' %>">
                <div class="zoom-container">
                  <img src="/img/productsimg/<%= image %>" 
                       class="d-block w-100 img-fluid zoom-img" 
                       alt="Product Image <%= index + 1 %>"
                       data-magnify-src="/img/productsimg/<%= image %>">
                </div>
              </div>
            <% }) %>
          </div>

          <a class="carousel-control-prev" href="#product-slider" role="button" data-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="sr-only">Previous</span>
          </a>
          <a class="carousel-control-next" href="#product-slider" role="button" data-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="sr-only">Next</span>
          </a>
        </div>
      </div>


  <!-- product details -->
      <div class="col-lg-6 product-details pl-md-5 ftco-animate">
        <h3><%=product.name%></h3>
        <div class="rating d-flex">
          <p class="text-left mr-4">
            <a href="#" class="mr-2">5.0</a>
            <a href="#"><span class="ion-ios-star-outline"></span></a>
            <a href="#"><span class="ion-ios-star-outline"></span></a>
            <a href="#"><span class="ion-ios-star-outline"></span></a>
            <a href="#"><span class="ion-ios-star-outline"></span></a>
            <a href="#"><span class="ion-ios-star-outline"></span></a>
          </p>
         
          
        </div>
        <p class="price"><span>₹<%=product.price%></span></p>
        <p>A small river named Duden flows by their place and supplies it with the necessary regelialia. It is a paradisematic country, in which roasted parts of sentences fly into your mouth. Text should turn around and return to its own, safe country. But nothing the copy said could convince her and so it didn’t take long until.
        </p>
        <div class="row mt-4">
          
          <div class="w-100"></div>
          <div class="input-group col-md-6 d-flex mb-3">
             <span class="input-group-btn mr-2">
                <button type="button" class="quantity-left-minus btn"  data-type="minus" data-field="">
                 <i class="ion-ios-remove"></i>
                </button>
              </span>
             <input type="text" id="quantity" name="quantity" class="form-control input-number" value="1" min="1" max="100">
             <span class="input-group-btn ml-2">
                <button type="button" class="quantity-right-plus btn" data-type="plus" data-field="">
                   <i class="ion-ios-add"></i>
               </button>
             </span>
          </div>
          <div class="w-100"></div>
          <div class="col-md-12">
            <p style="color: #000;"><%=product.quantity%> kg available</p>
          </div>
        </div>
        <p><a href="cart.html" class="btn btn-black py-3 px-5">Add to Cart</a></p>
      </div>
        
      </div>
    </div>
  </div>
</section>


<section class="ftco-section">
  <div class="container">
    <div class="row justify-content-center mb-3 pb-3">
      <div class="col-md-12 heading-section text-center ftco-animate">
        <span class="subheading">Products</span>
        <h2 class="mb-4">Related Products</h2>
        <p>Far far away, behind the word mountains, far from the countries Vokalia and Consonantia</p>
      </div>
    </div>   		
  </div>
<!-- related products -->
  <div class="container">
    <div class="row">
      <% relatedProducts.forEach(products=>{%>
      <div class="col-md-6 col-lg-3 ftco-animate">
        <div class="product">
          <a href="/user/product/<%=products._id%>" class="img-prod"><img class="img-fluid" src="/img/productsimg/<%=products.images[0]%>" alt="Colorlib Template">
            <!-- <span class="status">30%</span> -->
            <div class="overlay"></div>
          </a>
          <div class="text py-3 pb-4 px-3 text-center">
            <h3><a href="/user/product/<%=products._id%>"><%=products.name%></a></h3>
            <div class="d-flex">
              <div class="pricing">
                <p class="price"><span class="mr-2 price-dc"></span><span class="price-sale"><%=products.price%></span></p>
              </div>
            </div>
            <div class="bottom-area d-flex px-3">
              <div class="m-auto d-flex">
                <a href="#" class="add-to-cart d-flex justify-content-center align-items-center text-center">
                  <span><i class="ion-ios-menu"></i></span>
                </a>
                <a href="#" class="buy-now d-flex justify-content-center align-items-center mx-1">
                  <span><i class="ion-ios-cart"></i></span>
                </a>
                <a href="#" class="heart d-flex justify-content-center align-items-center ">
                  <span><i class="ion-ios-heart"></i></span>
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
     <%})%>
    </div>
  </div>
</section>
<script>
  $(document).ready(function() {
    // Quantity increment
    $('.quantity-right-plus').click(function(e) {
      e.preventDefault();
      
      // Get the closest quantity input field
      var quantityInput = $(this).closest('.input-group').find('.input-number');
      var quantity = parseInt(quantityInput.val());
      var maxQuantity = parseInt(quantityInput.attr('max')); // Get the max quantity from the input field

      // If quantity is less than max, increment it
      if (quantity < maxQuantity) {
        quantityInput.val(quantity + 1);
      }
    });

    // Quantity decrement
    $('.quantity-left-minus').click(function(e) {
      e.preventDefault();
      
      // Get the closest quantity input field
      var quantityInput = $(this).closest('.input-group').find('.input-number');
      var quantity = parseInt(quantityInput.val());
      
      // If quantity is greater than 1, decrement it
      if (quantity > 1) {
        quantityInput.val(quantity - 1);
      }
    });
  });




$(document).ready(function() {
    // Initialize magnify on all zoom-img elements
    $('.zoom-img').each(function() {
        $(this).magnify({
            speed: 200,
            src: $(this).attr('src'),
            width: 2000,
            height: 2000
        });
    });

    // Handle carousel slides
    $('#product-slider').on('slide.bs.carousel', function () {
        // Destroy existing magnify instances
        $('.zoom-img').magnify('destroy');
        
        // Reinitialize magnify after slide
        setTimeout(function() {
            $('.zoom-img').each(function() {
                $(this).magnify({
                    speed: 200,
                    src: $(this).attr('src'),
                    width: 2000,
                    height: 2000
                });
            });
        }, 500);
    });

    // Add custom mouse-move zoom effect
    $('.zoom-container').on('mousemove', function(e) {
        const $container = $(this);
        const $img = $container.find('img');
        
        if (!$container.hasClass('active-zoom')) return;

        const containerRect = $container[0].getBoundingClientRect();
        const xPos = (e.clientX - containerRect.left) / containerRect.width;
        const yPos = (e.clientY - containerRect.top) / containerRect.height;

        $img.css('transform-origin', `${xPos * 100}% ${yPos * 100}%`);
    });

    // Handle zoom in/out on click
    $('.zoom-container').on('click', function() {
        const $container = $(this);
        const $img = $container.find('img');
        
        if ($container.hasClass('active-zoom')) {
            // Zoom out
            $container.removeClass('active-zoom');
            $img.css('transform', 'scale(1)');
            $('#product-slider').removeClass('zooming');
        } else {
            // Zoom in
            $container.addClass('active-zoom');
            $img.css('transform', 'scale(2.5)');
            $('#product-slider').addClass('zooming');
        }
    });

    // Reset zoom when mouse leaves
    $('.zoom-container').on('mouseleave', function() {
        const $container = $(this);
        const $img = $container.find('img');
        
        $container.removeClass('active-zoom');
        $img.css('transform', 'scale(1)');
        $('#product-slider').removeClass('zooming');
    });
});

</script>
